/* =======================================================
 * BanPlex Styles - v9.0 Progressive App
 * ======================================================= */
 :root {
  --bg-start: #f0f4f8;
  --bg-end: #d9e2ec;
  --panel: #ffffff;
  --surface-muted: #f8fafc;
  --text: #000000;
  --text-dim: #64748b;
  --line: #e2e8f0;
  --primary: #0ea5e9;
  --info: #10b981;
  --grad: linear-gradient(135deg, #0ea5e9 0%, #10b981 100%);
  --danger: #ef4444;
  --success: #22c55e;
  --warn: #f59e0b;
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.04);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.06), 0 2px 4px -2px rgb(0 0 0 / 0.06);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.08), 0 4px 6px -4px rgb(0 0 0 / 0.08);
  --radius: 16px;
  --radius-sm: 10px;
  --radius-lg: 20px;
  --spacing: 1rem;
  --transition-base: 250ms cubic-bezier(.4,0,.2,1);
  --grad-danger: linear-gradient(135deg, #ef4444 0%, #f87171 100%);
}

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
html { scroll-behavior: smooth }

body {
  margin: 0;
  font-family: 'Inter', system-ui, sans-serif;
  background-image: url('background-image.png');
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
  color: var(--text);
  font-size: 14px; 
  line-height: 1.5;
  user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}

#app-shell { display: flex; min-height: 100vh; }
.content-wrapper { flex: 1; display: flex; flex-direction: column; min-width: 0; padding-bottom: 75px; }
.content-wrapper::before,
.content-wrapper::after {
  content: ""; position: fixed; z-index: 0; pointer-events: none; filter: blur(40px); opacity: .25;
}
.content-wrapper::before { top: -80px; right: -60px; width: 260px; height: 260px; background: radial-gradient(closest-side, rgba(14,165,233,.6), transparent 70%); }
.content-wrapper::after { bottom: -100px; left: -80px; width: 300px; height: 300px; background: radial-gradient(closest-side, rgba(16,185,129,.5), transparent 70%); }

.page-container { padding: var(--spacing); position: relative; overscroll-behavior-y: contain; }

.toolbar { display: flex; gap: .5rem; align-items: center; margin: .75rem var(--spacing) .5rem var(--spacing); position: relative; z-index: 1; padding: 0 .25rem; margin-bottom: .75rem;}
.toolbar .search { flex: 1; display: flex; align-items: center; gap: .45rem; background: var(--surface-muted); border: 1px solid var(--line); border-radius: var(--radius-sm); padding: .5rem .75rem; min-height: 40px; height: 40px; box-shadow: var(--shadow-sm); transition: box-shadow .2s ease;}
.toolbar .search:focus-within { border-color: var(--primary); box-shadow: 0 0 0 3px color-mix(in srgb, var(--primary) 20%, transparent); }
.toolbar .search .material-symbols-outlined { color: var(--text-dim); font-size: 22px; }
.toolbar .search input { border: none; outline: none; width: 100%; background: transparent; font-size: .9rem; color: var(--text); }
.toolbar .search input::placeholder { color: var(--text-dim); }
.toolbar .icon-btn { width: 40px; height: 40px; display: inline-flex; align-items: center; justify-content: center; border-radius: var(--radius-sm); border: 1px solid var(--line); background: var(--surface-muted); box-shadow: var(--shadow-sm); cursor: pointer; transition: transform .15s ease, background-color .15s ease, color .15s ease; position: relative; color: var(--text-dim); }
.toolbar .icon-btn:hover { transform: translateY(-2px); background: #f1f5f9; color: var(--text); }
.toolbar .icon-btn:active { transform: scale(0.95); }
.toolbar .icon-btn .material-symbols-outlined { font-size: 22px; transition: transform .3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
.toolbar .icon-btn.active { background-color: color-mix(in srgb, var(--primary) 15%, transparent); color: var(--primary); border-color: var(--primary); }
.toolbar .icon-btn.animating .material-symbols-outlined { transform: rotate(360deg); }


/* Micro-interactions & Transitions */
.btn, .btn-icon, .nav-item, .card { transition: transform .15s ease, box-shadow .15s ease, background-color .2s ease, opacity .2s ease; }
.btn:active, .btn-icon:active, .nav-item:active { transform: scale(0.98); }
.fade-in { animation: fadeIn .25s ease both; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(4px); } to { opacity: 1; transform: translateY(0); } }

/* Badge Styles */
.badge { display: inline-flex; align-items: center; gap: .25rem; font-size: .65rem; padding: .15rem .4rem; border-radius: 999px; border: 1px solid var(--line); background: var(--surface-muted); color: var(--text-dim); }
.badge.material { color: #065f46; border-color: #a7f3d0; background: #ecfdf5; }
.badge.operasional { color: #1e3a8a; border-color: #bfdbfe; background: #eff6ff; }
.badge.lainnya { color: #6b21a8; border-color: #e9d5ff; background: #faf5ff; }

/* Form Elements */
select, .custom-select-trigger { min-height: 40px; height: 40px; padding: .5rem .75rem; border-radius: var(--radius-sm); font-size: 0.85rem; line-height: 1.2; }
select { appearance: none; -webkit-appearance: none; background-color: var(--surface-muted); border: 1px solid var(--line); color: var(--text); }
.form-group > select, .form-group > .custom-select-trigger { width: 100%; }

/* Bottom Navigation */
.bottom-nav { position: fixed; bottom: 0; left: 0; right: 0; z-index: 1000; height: 65px; background-color: rgba(255, 255, 255, 0.8); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border-top: 1px solid var(--line); box-shadow: 0 -2px 10px rgba(0,0,0,.03); display: flex; justify-content: space-around; padding: 0 .5rem; }
.bottom-nav .nav-item { font-size: 0.75rem; gap: 4px; color: var(--text-dim); position: relative; display: flex; flex-direction: column; align-items: center; flex: 1; height: 100%; justify-content: center; font-weight: 500; border: none; background: none; cursor: pointer; padding: 0.5rem 0.25rem; transition: color var(--transition-base); }
.bottom-nav .nav-item .material-symbols-outlined { font-size: 24px; }
.bottom-nav .nav-item.active { color: var(--primary); }
.bottom-nav .nav-item.active .material-symbols-outlined { font-variation-settings: 'FILL' 1; }
.nav-item .notification-badge { position: absolute; top: 4px; right: 22px; background-color: var(--danger); color: white; width: 16px; height: 16px; border-radius: 50%; font-size: 0.6rem; font-weight: 700; display: flex; justify-content: center; align-items: center; border: 2px solid var(--panel); }

/* Dashboard Specific Styles */
.dashboard-balance-grid { display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing); margin-bottom: 1.5rem; }
.dashboard-balance-card { position: relative; background-color: var(--panel); border: 1px solid var(--line); border-radius: var(--radius); padding: .75rem; display: flex; flex-direction: column; gap: 0.35rem; justify-content: center; min-height: 36px; }
.dashboard-balance-card.clickable { cursor: pointer; }
.dashboard-balance-card.clickable:hover { transform: translateY(-2px); box-shadow: var(--shadow-md); }
.dashboard-balance-card::after { content: ""; position: absolute; inset: 0; border-radius: inherit; padding: 1px; pointer-events: none; -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite: xor; mask-composite: exclude; background-image: var(--grad); opacity: .25; }
.dashboard-balance-card .label { font-size: 0.6rem; color: var(--text-dim); font-weight: 500; }
.dashboard-balance-card .value { font-size: 0.9rem; font-weight: 700; line-height: 1.2; color: var(--text) !important; overflow-wrap: break-word; word-break: break-all; }
.dashboard-actions-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 0.75rem; padding: 0; margin-bottom: 1.5rem; }
.dashboard-action-item { display: flex; flex-direction: column; align-items: center; text-align: center; cursor: pointer; background: none; border: none; padding: 0; }
.dashboard-action-item .icon-wrapper { width: 56px; height: 56px; border-radius: var(--radius); background: var(--panel); border: 1px solid var(--line); color: var(--text); display: flex; align-items: center; justify-content: center; margin-bottom: .35rem; transition: background-color 0.2s, transform .15s ease; }
.dashboard-action-item:hover .icon-wrapper { background-color: #f8fafc; }
.dashboard-action-item .icon-wrapper .material-symbols-outlined { font-size: 24px; }
.dashboard-action-item .label { font-weight: 500; font-size: 0.6rem; color: var(--text); line-height: 1.3; word-break: break-word; }
.dashboard-action-item.action-item-extra { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
.actions-collapsed .action-item-extra { opacity: 0; transform: scale(0.8); max-height: 0; padding: 0; margin: 0; overflow: hidden; pointer-events: none; font-size: 0; }
.budget-item { padding: 0.75rem 0; border-bottom: 1px solid var(--line); }
.budget-item:first-child { padding-top: 0; }
.budget-item:last-child { border-bottom: none; padding-bottom: 0; }
.budget-info { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.6rem; }
.budget-info .project-name { font-weight: 600; font-size: 0.85rem; }
.budget-info .remaining-amount { font-weight: 700; font-size: 0.9rem; }
.budget-info .remaining-amount.negative { color: var(--danger); }
.progress-bar-container { height: 6px; width: 100%; background-color: var(--surface-muted); border-radius: 3px; overflow: hidden; margin-bottom: 0.4rem; }
.progress-bar { height: 100%; border-radius: 3px; transition: width var(--transition-base); background-image: var(--grad); }
.budget-details { display: flex; justify-content: space-between; font-size: 0.7rem; color: var(--text-dim); }
.daily-recap-item { display: flex; justify-content: space-between; align-items: center; padding: 0.75rem 0; border-bottom: 1px solid var(--line); font-size: 0.8rem; }
.daily-recap-item:first-child { padding-top: 0; }
.daily-recap-item:last-child { border-bottom: none; padding-bottom: 0; }
.daily-recap-item strong { font-weight: 600; }

/* Page Header & General Layout */
.page-label { position: static; z-index: 1; display: flex; align-items: baseline; gap: .5rem; padding: 1.5rem var(--spacing) 0.5rem var(--spacing); }
.page-label .app-name { font-weight: 700; letter-spacing: .2px; }
.page-label .page-name { font-size: .85rem; color: var(--text-dim); }
.section-title-owner { font-size: 0.9rem; margin: 1.5rem 0 1rem 0; font-weight: 600; color: var(--text-dim); }

/* Settings & Profile */
.settings-list { display: flex; flex-direction: column; gap: .5rem; }
.settings-list-item { display: flex; align-items: center; gap: 1rem; background-color: var(--panel); padding: .8rem 1rem; border-radius: var(--radius); border: 1px solid var(--line); cursor: pointer; transition: background-color 0.2s, transform 0.2s; }
.settings-list-item:hover { background-color: var(--surface-muted); transform: scale(1.02); }
.settings-list-item .icon-wrapper { width: 40px; height: 40px; flex-shrink: 0; background-color: color-mix(in srgb, var(--primary) 10%, transparent); color: var(--primary); display: flex; align-items: center; justify-content: center; border-radius: 10px; }
.settings-list-item .icon-wrapper .material-symbols-outlined { font-size: 22px; }
.settings-list-item .label { font-weight: 600; font-size: 0.9rem; color: var(--text); }
.profile-card-settings { background-color: var(--panel); border-radius: var(--radius-lg); padding: 1.25rem; border: 1px solid var(--line); display: flex; flex-direction: column; align-items: center; text-align: center; margin-bottom: 1.5rem; }
.profile-avatar { width: 64px; height: 64px; border-radius: 50%; margin-bottom: 1rem; object-fit: cover; }
.profile-card-settings .profile-name { font-size: 1rem; font-weight: 600; }
.profile-card-settings .profile-email { font-size: 0.8rem; color: var(--text-dim); }
.profile-role-badge { margin-top: 0.5rem; background-image: var(--grad); color: #fff; padding: 0.2rem 0.6rem; border-radius: 999px; font-size: 0.7rem; font-weight: 600; }
.profile-actions { margin-top: 1rem; }

/* Buttons */
.btn { padding: .5rem 1rem; font-size: 0.8rem; border-radius: var(--radius-sm); font-weight: 600; cursor: pointer; display: inline-flex; align-items: center; justify-content: center; gap: .4rem; transition: all .2s ease; border: 1px solid transparent; }
.btn:hover { transform: translateY(-2px); }
.btn:active { transform: translateY(0); }
.btn-primary { background: var(--grad); color: #fff; box-shadow: var(--shadow-md); }
.btn-primary:hover { filter: brightness(1.1); }
.btn-secondary { background: var(--surface-muted); color: var(--text); border-color: var(--line); }
.btn-secondary:hover { background-color: var(--line); }
.btn-danger { background: var(--danger); color: #fff; }
.btn-success { background: var(--success); color: #fff; }
.btn-icon { background: none; border: none; padding: .4rem; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; cursor: pointer; color: var(--text-dim); transition: background-color .2s, color .2s; }
.btn-icon:hover { background-color: var(--surface-muted); color: var(--text); }
.btn-icon-danger:hover { background-color: color-mix(in srgb, var(--danger) 15%, transparent); color: var(--danger); }
.btn-icon-success:hover { background-color: color-mix(in srgb, var(--success) 15%, transparent); color: var(--success); }

/* Cards & Forms */
.card { background: var(--panel); border: 1px solid var(--line); border-radius: var(--radius); box-shadow: var(--shadow-sm); }
.card.clickable:hover { transform: translateY(-1px); box-shadow: var(--shadow-md); }
.card-pad { padding: var(--spacing); }
.form-group { margin-bottom: 1.25rem; display: flex; flex-direction: column; gap: .25rem;}
label { font-size: .8rem; font-weight: 500; color: var(--text-dim); }
input, select, textarea { width: 100%; background: var(--surface-muted); color: var(--text); border: 1px solid var(--line); border-radius: var(--radius-sm); padding: .5rem .75rem; font-family: 'Inter', sans-serif; font-size: 0.85rem; appearance: none; -webkit-appearance: none; }
.custom-select-trigger { background: var(--surface-muted) !important; border: 1px solid var(--line) !important; }
input:focus, select:focus, textarea:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px color-mix(in srgb, var(--primary) 20%, transparent); }
.hidden { display: none !important; }
input:disabled, select:disabled, textarea:disabled, button:disabled { opacity: 0.6; cursor: not-allowed; }

/* Modals */
.modal-bg { position: fixed; inset: 0; display: flex; justify-content: center; align-items: flex-end; z-index: 1200; opacity: 0; transition: opacity .3s; pointer-events: none; background: rgba(15, 23, 42, 0.45); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); }
.modal-bg.show { opacity: 1; pointer-events: auto; }
.modal-content { width: 100%; max-height: 95vh; min-height: 150px; border-radius: var(--radius-lg) var(--radius-lg) 0 0; background: #fdfdfd; box-shadow: var(--shadow-lg); transform: translateY(100%); transition: transform .3s; display: flex; flex-direction: column; }
.modal-bg.show .modal-content { transform: translateY(0); }
.modal-header { padding: .8rem 1.25rem; border-bottom: 1px solid var(--line); display: flex; justify-content: space-between; align-items: center; }
.modal-header h4 { font-size: 1rem; margin: 0; }
.modal-body { overflow-y: auto; padding: 1.25rem; }
.modal-footer { padding: .8rem 1rem; border-top: 1px solid var(--line); display: flex; justify-content: flex-end; gap: .5rem; }
.confirm-modal-text { text-align: center; font-size: 0.9rem; line-height: 1.6; padding: 0.5rem 0; color: var(--text-dim); }
.confirm-modal-text strong { color: var(--text); font-weight: 600; }

/* Toast/Popup */
.popup-container { position: fixed; top: -100px; left: 50%; transform: translateX(-50%); z-index: 2000; transition: top 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); pointer-events: none; width: auto; max-width: calc(100% - 2rem); }
.popup-container.show { top: 1rem; }
.popup-content { padding: 0.7rem 1.25rem; font-size: 0.9rem; font-weight: 500; display: flex; align-items: center; gap: 0.75rem; border-radius: 999px; color: #000; background-color: #ffffff; box-shadow: var(--shadow-lg); pointer-events: auto; white-space: nowrap; }
.popup-content .material-symbols-outlined { font-size: 1.25rem; }
.popup-content .spinner { width: 1.25rem; height: 1.25rem; border-width: 2px; }
.popup-content p { margin: 0; }
.popup-container.popup-success .popup-content .material-symbols-outlined { color: var(--success); }
.popup-container.popup-error .popup-content .material-symbols-outlined { color: var(--danger); }
.popup-container.popup-warn .popup-content .material-symbols-outlined { color: var(--warn); }

/* Loaders & Spinners */
.spinner { width: 1em; height: 1em; border: 2px solid rgba(0, 0, 0, .2); border-top-color: #000; border-radius: 50%; animation: spin 1s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }
.loader-container { padding: 2rem; display: flex; justify-content: center; }
.global-loader { position: fixed; inset: 0; background-color: #ffffff; display: flex; justify-content: center; align-items: center; z-index: 9999; }
.loader-content { display: flex; flex-direction: column; align-items: center; gap: 1rem; }
.loader-spinner { width: 28px; height: 28px; border-radius: 50%; border: 3px solid #e5e7eb; border-top-color: var(--primary); animation: spin 1s linear infinite; }

/* Sub Navigation / Tabs */
.sub-nav { display: flex; margin-bottom: 1rem; border-bottom: 1px solid var(--line); }
.sub-nav-item { flex: 1; text-align: center; padding: .6rem .5rem; border: none; background: none; cursor: pointer; font-weight: 600; color: var(--text-dim); border-bottom: 3px solid transparent; transition: all .2s; font-size: 0.8rem; white-space: nowrap; }
.sub-nav-item.active, .sub-nav-item:hover { color: var(--primary); }
.sub-nav-item.active { border-bottom-color: var(--primary); }

/* List Item Cards */
.card-list-item { padding: .65rem 1rem; margin-bottom: 0.5rem; display: flex; align-items: center; gap: .5rem; }
.card-list-item-content { display: flex; justify-content: space-between; align-items: flex-start; width: 100%; cursor: pointer; gap: 1rem; }
.card-list-item-details { flex: 1; min-width: 0; }
.card-list-item-title { font-size: 0.85rem; font-weight: 600; margin: 0; line-height: 1.4; word-break: break-word; }
.card-list-item-subtitle { font-size: 0.7rem; color: var(--text-dim); margin-top: .1rem; }
.card-list-item-amount-wrapper { display: flex; flex-direction: column; align-items: flex-end; flex-shrink: 0; text-align: right; }
.card-list-item-amount { font-size: 0.9rem; font-weight: 700; color: var(--primary); white-space: nowrap; }
.paid-indicator, .card-list-item-repayment-info { display: flex; align-items: center; justify-content: flex-end; gap: .25rem; font-size: 0.75rem; margin-top: .1rem; font-weight: 500; }
.paid-indicator { color: var(--success); }
.paid-indicator .material-symbols-outlined { font-size: 1rem; font-variation-settings: 'FILL' 1; }

/* Master Data & User Management Lists */
.master-data-list { display: flex; flex-direction: column; gap: .5rem; }
.master-data-item { display: flex; justify-content: space-between; align-items: center; padding: .75rem 1rem; background-color: var(--surface-muted); border-radius: var(--radius-sm); border: 1px solid var(--line); }
.master-data-item-info { display: flex; align-items: center; gap: .5rem; flex-grow: 1; min-width: 0; }
.master-data-item-info span { font-weight: 500; word-break: break-word; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.master-data-item-actions { display: flex; flex-shrink: 0; }
.master-data-item .user-info-container { display: flex; flex-direction: column; gap: 2px; }
.master-data-item .user-email { font-size: 0.75rem; color: var(--text-dim); }
.master-data-item .user-badges { display: flex; gap: 0.5rem; margin-top: 0.5rem; }
.user-badge { padding: 0.2rem 0.6rem; border-radius: 6px; font-size: 0.7rem; font-weight: 600; text-transform: capitalize; line-height: 1.4; }
.user-badge.role-owner { background-color: #e0f2fe; color: #0369a1; }
.user-badge.role-editor { background-color: #fef9c3; color: #a16207; }
.user-badge.role-viewer { background-color: #f3f4f6; color: #4b5563; }
.user-badge.status-active { background-color: #dcfce7; color: #16a34a; }
.user-badge.status-pending { background-color: #fee2e2; color: #dc2626; }
.category-badge { font-size: 0.7rem; padding: 0.2rem 0.6rem; border-radius: 6px; color: var(--text); background-color: var(--line); flex-shrink: 0; font-weight: 500; }
.category-badge.category-main { background-color: #dcfce7; color: #16a34a; }
.category-badge.category-internal { background-color: #e0e7ff; color: #4338ca; }

/* Custom Select Dropdown */
.master-data-select { display: flex; align-items: center; gap: .5rem; }
.master-data-select .custom-select-wrapper { flex-grow: 1; }
.custom-select-wrapper { position: relative; }
.custom-select-trigger { width: 100%; display: flex; justify-content: space-between; align-items: center; cursor: pointer; text-align: left; padding: .7rem .9rem; border: 1px solid var(--line); border-radius: var(--radius-sm); background: var(--surface); }
.custom-select-trigger span:first-child { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.custom-select-wrapper.active .custom-select-trigger { border-color: var(--primary); }
.custom-select-options { display: none; position: absolute; top: calc(100% + 4px); left: 0; right: 0; z-index: 10; background: var(--panel); border: 1px solid var(--line); border-radius: var(--radius-sm); max-height: 200px; overflow-y: auto; box-shadow: var(--shadow-md); }
.custom-select-wrapper.active .custom-select-options { display: block; }
.custom-select-option { padding: .6rem .8rem; cursor: pointer; transition: background-color .2s; }
.custom-select-option:hover { background-color: var(--surface-muted); }

/* Action Menu (More Options) */
.actions-menu { position: fixed; background-color: var(--surface-muted); border-radius: var(--radius-sm); box-shadow: var(--shadow-lg); overflow: hidden; min-width: 150px; animation: fade-in-sm .15s ease; z-index: 1201; }
@keyframes fade-in-sm { from { opacity: 0; transform: scale(.95); } to { opacity: 1; transform: scale(1); } }
.actions-menu-item { display: flex; align-items: center; gap: .75rem; padding: .6rem 1rem; background: none; border: none; width: 100%; text-align: left; color: var(--text); cursor: pointer; transition: background-color .2s; }
.actions-menu-item:hover { background-color: var(--line); }
.actions-menu-item .material-symbols-outlined { font-size: 20px; color: var(--text-dim); }
.actions-modal-header { text-align: center; padding: 1rem 1.25rem; margin-bottom: 1rem; border-bottom: 1px solid var(--line); }
.actions-modal-header h4 { font-size: 1rem; margin: 0; word-break: break-word; }
.actions-modal-header span { font-size: 0.8rem; color: var(--text-dim); display: block; margin-top: 0.25rem; }
.actions-modal-header strong { font-size: 1.25rem; color: var(--primary); display: block; margin-top: 0.5rem; }
.actions-modal-list { display: flex; flex-direction: column; gap: 0.5rem; }

/* Detail Lists & Summaries */
.detail-list { display: flex; flex-direction: column; }
.detail-list div { display: flex; justify-content: space-between; align-items: center; padding: .9rem 0; border-bottom: 1px solid var(--line); gap: 1rem; }
.detail-list div:last-child { border-bottom: none; }
.detail-list dt { font-size: 0.85rem; color: var(--text-dim); }
.detail-list dd { font-size: 0.85rem; font-weight: 600; text-align: right; }
.status-badge { padding: 0.2rem 0.6rem; border-radius: 999px; font-size: 0.75rem; font-weight: 600; display: inline-block; }
.status-badge.positive { color: #15803d; background-color: #dcfce7; }
.status-badge.negative { color: #b91c1c; background-color: #fee2e2; }

/* Payment & Invoice Modals */
.payment-summary { padding: 0; margin-bottom: 2rem; background-color: transparent; }
.payment-summary div { font-size: 0.9rem; padding: 0.85rem 0; border-bottom: 1px solid var(--line); }
.payment-summary strong { font-size: 0.9rem; }
.payment-summary .remaining { font-size: 1rem; font-weight: 600; }
.payment-summary .remaining strong { font-size: 1.15rem; font-weight: 700; color: var(--warn); }
.loan-calculation-result { margin-top: 1rem; padding: 0.75rem 1rem; background-color: var(--surface-muted); border-radius: var(--radius-sm); text-align: center; font-weight: 500; display: none; }
.loan-calculation-result .label { display: block; font-size: 0.85rem; color: var(--text-dim); margin-bottom: 0.25rem; }
.loan-calculation-result .amount { font-size: 1.25rem; font-weight: 600; color: var(--primary); }
.invoice-section-title, .detail-section-title { font-size: 1rem; font-weight: 600; color: var(--text-dim); margin: 2rem 0 1rem 0; padding-bottom: .5rem; border-bottom: 1px solid var(--line); }
#invoice-items-container { display: flex; flex-direction: column; gap: 0.75rem; }
.readonly-input { background-color: var(--line); cursor: not-allowed; }
.invoice-item-row { display: grid; grid-template-columns: 1fr auto; gap: 0.5rem 1rem; padding: 1rem; border: 1px solid var(--line); border-radius: var(--radius-sm); background-color: var(--surface-muted); }
.invoice-item-row .item-name { grid-column: 1 / -1; }
.invoice-item-row .item-details { grid-column: 1 / -1; display: flex; align-items: center; gap: 0.5rem; }
.invoice-item-row .item-price { flex: 1; }
.invoice-item-row .item-qty { width: 60px; }
.invoice-item-row .item-total { grid-column: 1 / 2; align-self: center; font-weight: 700; font-size: 1rem; color: var(--primary); }
.invoice-item-row .remove-item-btn { grid-column: 2 / 3; align-self: center; justify-self: end; }
.add-item-action { text-align: left; margin-top: 0.5rem; }
.add-item-action .btn-icon { color: var(--primary); }
.add-item-action .btn-icon .material-symbols-outlined { font-size: 2rem; }
.invoice-total { display: flex; justify-content: space-between; align-items: center; font-size: 1.1rem; font-weight: 600; margin-top: 1.5rem; padding-top: 1rem; border-top: 2px solid var(--line); }
.invoice-total strong { color: var(--primary); font-size: 1.25rem; }

/* Detail Modals Layout */
.detail-modal-header { padding: 1rem 1.25rem; text-align: center; }
.detail-modal-header h4 { font-size: 0.9rem; font-weight: 500; color: var(--text-dim); margin: 0 0 0.5rem 0; }
.detail-modal-header strong { font-size: 1.75rem; font-weight: 700; color: var(--primary); }
.detail-modal-body { padding: 0.5rem 1.25rem 1.25rem 1.25rem; }
.invoice-detail-list { padding: 0.5rem 1.25rem; }
.invoice-detail-item { padding: 0.75rem 0; border-bottom: 1px solid var(--line); }
.invoice-detail-item:last-child { border-bottom: none; }
.item-main-info { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.2rem; }
.item-name { font-size: 0.85rem; font-weight: 500; word-break: break-word; }
.item-total { font-size: 0.85rem; font-weight: 600; white-space: nowrap; }
.item-sub-info { font-size: 0.75rem; color: var(--text-dim); }
.invoice-detail-summary { display: flex; justify-content: space-between; align-items: center; padding: 1rem 1.25rem; margin-top: 0.5rem; font-weight: 600; }

/* Attachments */
.attachment-gallery { display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 1rem; }
.attachment-item { position: relative; text-align: center; gap: .5rem; }
.attachment-item span { font-size: .8rem; font-weight: 500; display: block; margin-top: .5rem; }
.attachment-thumbnail { width: 100%; height: 100px; object-fit: cover; border-radius: var(--radius-sm); cursor: pointer; border: 1px solid var(--line); }
.attachment-actions { position: absolute; top: 4px; right: 4px; }
.attachment-actions .btn-icon-danger { background-color: rgba(0,0,0,0.5); color: white; }
.image-view-modal { position: fixed; inset: 0; background-color: rgba(0,0,0,0.8); backdrop-filter: blur(5px); display: flex; justify-content: center; align-items: center; padding: 1rem; }
.image-view-modal img { max-width: 100%; max-height: 100%; object-fit: contain; }
.image-view-close { position: absolute; top: 1rem; right: 1rem; background-color: rgba(255,255,255,0.2); color: white; }

/* Reports & Recap */
.report-title { font-size: 1.2rem; margin-bottom: 1rem; }
.detail-list dd.positive, .recap-table td.positive { color: var(--success); }
.detail-list dd.negative, .recap-table td.negative { color: var(--danger); }
.detail-list .summary-row { background-color: var(--surface-muted); margin: .5rem -1.25rem; padding: .8rem 1.25rem; border-top: 1px solid var(--line); border-bottom: 1px solid var(--line); }
.detail-list .summary-row dt, .detail-list .summary-row dd { font-weight: 700; }
.detail-list .summary-row.final { font-size: 1.1rem; }
.detail-list .category-title { background: none; border: none; padding-top: 1.5rem; padding-bottom: 0; }
.detail-list .category-title dt { font-weight: 700; font-size: 1rem; color: var(--text); }
.rekap-actions { display: grid; grid-template-columns: 1fr 1fr; gap: .75rem; margin-top: 1.5rem; }
.rekap-actions .btn-primary { grid-column: 1 / -1; }
.rekap-filters { display: flex; flex-wrap: wrap; gap: var(--spacing); align-items: flex-end; }
.rekap-filters .form-group { margin-bottom: 0; flex-grow: 1; }
.recap-table-wrapper { overflow-x: auto; }
.recap-table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
.recap-table th, .recap-table td { padding: .75rem; text-align: left; border-bottom: 1px solid var(--line); }
.recap-table th { font-weight: 600; color: var(--text-dim); font-size: .85rem; }
.recap-table td { vertical-align: middle; }
.recap-table tr:last-child td { border-bottom: none; }
.recap-table strong { color: var(--primary); }
.recap-actions-cell { display: flex; gap: 0.5rem; }

/* Attendance */
.attendance-header { display: flex; flex-wrap: nowrap; gap: .75rem; margin-bottom: 1.25rem; }
.attendance-header .btn { flex: 1; padding: .5rem; font-size: .8rem; }
.attendance-header .btn .material-symbols-outlined { font-size: 18px; }
.attendance-controls { margin-bottom: 1.25rem; }
.attendance-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: calc(var(--spacing) * 0.75); }
.attendance-card { padding: var(--spacing); display: flex; flex-direction: column; gap: .75rem; }
.attendance-worker-info { display: flex; flex-direction: column; }
.attendance-worker-info strong { font-size: 1.05rem; font-weight: 600; }
.attendance-worker-info span { font-size: 0.85rem; color: var(--text-dim); }
.attendance-worker-info .worker-wage { font-size: 0.85rem; color: var(--primary); font-weight: 500; margin-top: 0.25rem; }
.attendance-actions { display: flex; align-items: center; justify-content: space-between; gap: .75rem; flex-wrap: wrap; }
.attendance-status { font-size: 0.85rem; font-weight: 500; color: var(--text-dim); flex-grow: 1; }
.attendance-status.checked-in { color: var(--primary); }
.attendance-status.completed { color: var(--text); font-weight: 600; }
.manual-attendance-item { padding: 0.75rem 1rem; margin-bottom: .75rem; display: flex; justify-content: space-between; align-items: center; flex-wrap: nowrap; gap: 1rem; }
.manual-attendance-item .worker-info { display: flex; flex-direction: column; flex-grow: 1; min-width: 0; }
.manual-attendance-item .worker-info strong { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.manual-attendance-item .worker-info .worker-wage { font-size: .8rem; color: var(--text-dim); }
.attendance-status-selector { display: flex; gap: .5rem; flex-shrink: 0; }
.attendance-status-selector label { display: flex; align-items: center; gap: .4rem; cursor: pointer; font-size: .85rem; padding: .4rem .6rem; border: 1px solid var(--line); border-radius: var(--radius-sm); transition: background-color .2s, border-color .2s; }
.attendance-status-selector input[type="radio"] { display: none; }
.attendance-status-selector input[type="radio"]:checked + span { color: var(--primary); font-weight: 600; }
.attendance-status-selector label:has(input:checked) { background-color: color-mix(in srgb, var(--primary) 10%, transparent); border-color: var(--primary); }
.form-footer-actions { margin-top: 1.5rem; position: sticky; bottom: 0; background: none; padding: 1rem 0; border-top: none; box-shadow: none; display: flex; justify-content: center; }

/* Logs */
.log-container { display: flex; flex-direction: column; gap: .75rem; }
.log-item { background-color: var(--panel); padding: .75rem 1rem; border-radius: var(--radius-sm); border-left: 4px solid var(--primary); }
.log-item-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: .25rem; }
.log-user { font-weight: 600; }
.log-time { font-size: .8rem; color: var(--text-dim); }
.log-action { margin: 0; }

/* Pull To Refresh */
.ptr { position: fixed; top: 0; left: 0; right: 0; min-height: 60px; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: .3rem; color: var(--text-dim); transition: transform .15s ease-out; pointer-events: none; z-index: 1001; transform: translateY(-70px); }
.ptr .ptr-spinner { width: 22px; height: 22px; border: 3px solid rgba(0,0,0,.2); border-top-color: var(--primary); border-radius: 50%; animation: spin 0.9s linear infinite; opacity: 0; }
.ptr.ptr-ready .ptr-spinner { opacity: 1; }

/* Update Notification */
#update-notification { position: fixed; inset: 0; background-color: rgba(15, 23, 42, 0.45); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); display: flex; justify-content: center; align-items: center; z-index: 1500; opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0.3s ease; }
#update-notification.show { opacity: 1; visibility: visible; }
.update-card { background-color: var(--panel); color: var(--text); padding: 1.5rem; border-radius: var(--radius-lg); text-align: center; box-shadow: var(--shadow-lg); max-width: 90%; width: 320px; margin: 1rem; transform: scale(0.95); transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
#update-notification.show .update-card { transform: scale(1); }
.update-card h4 { margin-top: 0; margin-bottom: 0.5rem; font-size: 1.1rem; }
.update-card p { margin-bottom: 1.25rem; font-size: 0.85rem; color: var(--text-dim); line-height: 1.6; }
.update-card .btn { width: 100%; }

/* Filter & Sort Modal */
.filter-modal-body .form-group:last-child { margin-bottom: 0; }
.filter-modal-footer { display: grid; grid-template-columns: 1fr 1fr; gap: .75rem; }
.sort-options { display: flex; flex-direction: column; gap: .5rem; }
.sort-option { display: flex; align-items: center; gap: .5rem; }
.sort-option input[type="radio"] { display: none; }
.sort-option label { flex-grow: 1; padding: .75rem 1rem; border: 1px solid var(--line); border-radius: var(--radius-sm); cursor: pointer; transition: all .2s ease; }
.sort-option input[type="radio"]:checked + label { background-color: color-mix(in srgb, var(--primary) 10%, transparent); border-color: var(--primary); color: var(--primary); font-weight: 600; }
.sort-direction { display: flex; background-color: var(--surface-muted); border-radius: var(--radius-sm); padding: .25rem; border: 1px solid var(--line); }
.sort-direction button { background: transparent; border: none; padding: .5rem; cursor: pointer; border-radius: 6px; color: var(--text-dim); }
.sort-direction button.active { background: var(--panel); color: var(--primary); box-shadow: var(--shadow-sm); }

/* Desktop & Large Screen Adjustments */
@media (min-width: 768px) {
  .bottom-nav { display: none; }
  .sidebar { display: flex; flex-direction: column; width: 240px; background-color: var(--panel); border-right: 1px solid var(--line); padding: 1.5rem 1rem; height: 100vh; position: sticky; top: 0; }
  .sidebar-header { display: flex; align-items: center; gap: 0.75rem; padding: 0 0.5rem 2rem 0.5rem; }
  .sidebar-logo { width: 40px; height: 40px; }
  .sidebar-title { font-size: 1.25rem; font-weight: 700; }
  .sidebar .nav-item { flex-direction: row; justify-content: flex-start; gap: 1rem; width: 100%; padding: 0.75rem 1rem; font-size: 0.9rem; border-radius: var(--radius-sm); }
  .sidebar .nav-item:hover { background-color: var(--surface-muted); }
  .sidebar .nav-item .nav-text { display: block; }
  .sidebar .nav-item .notification-badge { position: static; margin-left: auto; transform: none; }
  .content-wrapper { padding-bottom: 0; }
  .dashboard-actions-grid { grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); }
  .modal-bg { align-items: center; }
  .modal-content { width: 100%; max-width: 500px; max-height: 90vh; border-radius: var(--radius-lg); transform: scale(.95); transition: transform .3s cubic-bezier(0.4, 0, 0.2, 1), opacity .3s; }
  .modal-bg.show .modal-content { transform: scale(1); }
}

/* =======================================================
 * [REVISI FINAL] Tata Letak Global & Konsisten
 * ======================================================= */

/* 1. Aturan PADDING global untuk semua modal. Ini adalah dasar tata letak. */
.modal-body {
    padding: 1.25rem;
}

/* 2. Aturan untuk elemen yang harus full-width (seperti header/footer di dalam modal). */
/* Elemen-elemen ini akan "keluar" dari padding .modal-body menggunakan margin negatif. */
.detail-modal-header,
.invoice-detail-summary,
#dataDetail-modal .payment-summary {
    margin-left: -1.25rem;
    margin-right: -1.25rem;
    padding-left: 1.25rem;
    padding-right: 1.25rem;
    background-color: var(--surface-muted);
    border-bottom: 1px solid var(--line);
}

/* 3. Penyesuaian margin agar elemen full-width menempel sempurna di tepi. */
.detail-modal-header,
#dataDetail-modal .payment-summary {
    margin-top: -1.25rem; /* Menghilangkan ruang kosong di atas. */
    margin-bottom: 1.5rem; /* Memberi jarak ke konten di bawahnya. */
}

.detail-modal-header {
    padding-top: 1rem;
    padding-bottom: 1rem;
}

#dataDetail-modal .payment-summary {
     padding-top: .75rem;
    padding-bottom: .75rem;
}

.invoice-detail-summary {
    margin-top: 1.5rem; /* Beri jarak dari konten di atasnya */
    margin-bottom: -1.25rem; /* Menghilangkan ruang kosong di bawah. */
    border-top: 1px solid var(--line);
    border-bottom: none;
}

/*
   CATATAN: Aturan spesifik untuk #dataDetail-modal .modal-body { padding: initial; } telah dihapus.
   Sekarang semua modal akan memiliki padding yang konsisten, dan elemen full-width di atas
   akan menyesuaikan diri dengan benar.
*/

